---
// SmoothScrollLayout.astro - Wrapper para ScrollSmoother
---

<div id="smooth-wrapper">
  <div id="smooth-content">
    <slot />
  </div>
</div>

<style>
  #smooth-wrapper {
    overflow: hidden;
  }

  #smooth-content {
    overflow: visible;
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  import { ScrollSmoother } from "gsap/ScrollSmoother";

  gsap.registerPlugin(ScrollTrigger, ScrollSmoother);

  function initSmoothScroll() {
    // Crear ScrollSmoother una sola vez para toda la p√°gina
    ScrollSmoother.create({
      wrapper: "#smooth-wrapper",
      content: "#smooth-content",
      smooth: 2,
      effects: true,
      smoothTouch: 0.1,
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initSmoothScroll);
  } else {
    initSmoothScroll();
  }
</script>