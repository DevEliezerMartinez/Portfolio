---
// Component: Projects.astro
import Alfabetizatec_desktop from "@/assets/Alfabetizatec_desktop.png";
import Alfabetizatec_mobile from "@/assets/Alfabetizatec_mobile.png";
import DemoMotorsport from "@/assets/Demo_motorsport.png";
import { Image } from "astro:assets";
---

<section class="projects-section relative py-16 px-6 md:px-12 overflow-hidden">
  <!-- Fondo con dots pattern -->
  <div class="absolute inset-0 dots-background"></div>

  <!-- Contenido -->
  <div class="relative z-10 max-w-6xl mx-auto">
    <!-- Header -->
    <div class="mb-12">
      <h2
        class="text-[var(--color-orange)] text-2xl md:text-3xl font-bold italic mb-8"
      >
        PROYECTOS
      </h2>
      <h3
        class="text-white text-4xl md:text-6xl lg:text-7xl font-bold italic tracking-tight"
      >
        ALFABETIZATEC
      </h3>
    </div>

    <!-- Imagen del proyecto -->
    <div class="mb-12 flex justify-center items-center gap-8">
      <!-- Laptop mockup -->
      <div class="hidden md:block relative">
        <div
          class="bg-gray-800 rounded-lg p-3 shadow-2xl"
          style="width: 500px;"
        >
          <div class="bg-white rounded overflow-hidden">
            <Image
              src={Alfabetizatec_desktop}
              alt="AlfabetizaTec Desktop"
              class="w-full h-auto"
              loading="lazy"
            />
          </div>
        </div>
      </div>

      <!-- Mobile mockup -->
      <div class="relative">
        <div
          class="bg-gray-900 rounded-[2.5rem] p-3 shadow-2xl"
          style="width: 280px;"
        >
          <div
            class="bg-white rounded-[2rem] overflow-hidden"
            style="height: 580px;"
          >
            <Image
              src={Alfabetizatec_mobile}
              alt="AlfabetizaTec Mobile"
              class="w-full h-full object-cover"
              loading="lazy"
            />
          </div>
        </div>
      </div>
    </div>

    <!-- Descripción -->
    <div class="space-y-6 text-white">
      <p class="text-lg md:text-xl italic">
        <span class="text-[var(--color-orange)]"
          >Educación a escala nacional</span
        >
      </p>

      <section class="alfabetizatec-description font-plex italic">
        <p class="project-paragraph leading-relaxed text-base md:text-2xl">
          Uno de los proyectos más significativos que he desarrollado es <span
            class="font-semibold">Alfabetizatec</span
          >, una plataforma creada para el Instituto Nacional para la Educación
          de los Adultos (INEA) junto con el TecNM San Marcos.
        </p>

        <p class="project-paragraph leading-relaxed text-base md:text-2xl">
          Su propósito era más grande que el código: ayudar a que más personas
          aprendan a leer y escribir. Hoy se usa a nivel nacional para facilitar
          la educación de miles de personas. Recibí reconocimiento oficial por
          el proyecto, pero lo que más me importa es saber que está ayudando a
          gente real a transformar sus vidas a través del conocimiento.
        </p>

        <p class="project-paragraph leading-relaxed text-base md:text-2xl">
          Desarrollar esa herramienta fue entender que la tecnología, cuando se
          usa con empatía, puede cambiar realidades. Cada proyecto que construyo
          sigue esa misma filosofía: no busco llenar un portafolio, sino dejar
          huellas que sirvan.
        </p>
      </section>

      <!-- Stack -->
      <div class="pt-6 flex flex-col items-start md:flex-row gap-4 justify-end">
        <p class="text-sm md:text-base btn-stack">
          <span class="font-semibold">Stack:</span> PHP, MySQL, JavaScript, CSS
        </p>
        <a href="/alfabetizatec" class="btn-31">
          <span class="text-container">
            <span class="text">Conocer más</span>
          </span>
        </a>
      </div>
    </div>

    <!-- Espaciador con fade de dots -->
    <div class="project-spacer mt-16 mb-16"></div>

    <!-- Segundo Proyecto: Demo Motorsport -->
    <div>
      <!-- Header -->
      <div class="mb-12">
        <h3
          class="text-white text-4xl md:text-6xl lg:text-7xl font-bold italic tracking-tight text-center"
        >
          DEMO MOTORSPORT
        </h3>
      </div>

      <!-- Imagen del proyecto -->
      <div class="mb-12 flex justify-center">
        <div class="relative max-w-2xl w-full">
          <div class="rounded-2xl overflow-hidden shadow-2xl">
            <Image
              src={DemoMotorsport}
              alt="Demo Motorsport"
              class="w-full h-auto"
              loading="lazy"
            />
          </div>
        </div>
      </div>

      <!-- Descripción -->
      <div class="space-y-6 text-white">
        <p class="text-lg md:text-xl italic text-center">
          <span class="text-[var(--color-orange)]"
            >Exploración técnica + pasión personal</span
          >
        </p>

        <section class="motorsport-description font-plex italic">
          <p class="project-paragraph leading-relaxed text-base md:text-2xl">
            Una experiencia digital inmersiva inspirada en la cultura del drift
            y los builds JDM. Animaciones avanzadas con GSAP, visualizaciones
            SVG de trazadas de drift, especificaciones técnicas interactivas y
            un recorrido visual por cada etapa del build.
          </p>

          <p class="project-paragraph leading-relaxed text-base md:text-2xl">
            No es solo una página web. Es una forma de contar historias de
            builds legendarios como si estuvieras viendo el auto en persona:
            cada detalle de un motor, cada modificación personalizada, cada
            capa de pintura Midnight Purple explicada con la misma pasión con la
            que fue construido.
          </p>

          <p class="project-paragraph leading-relaxed text-base md:text-2xl">
            El motorsport me fascina tanto como el código. La precisión bajo
            presión, conocer los límites del medio, llevar todo al máximo. Ese
            es el estándar que busco en cada proyecto: experiencias que hagan
            justicia a la pasión real detrás de cada marca o creador.
          </p>
        </section>

        <!-- Stack -->
        <div
          class="pt-6 flex flex-col items-start md:flex-row gap-4 justify-end"
        >
          <p class="text-sm md:text-base btn-stack">
            <span class="font-semibold">Stack:</span> Astro, GSAP, Tailwind
          </p>
          <a href="/motorsport" class="btn-31">
            <span class="text-container">
              <span class="text">Conocer más</span>
            </span>
          </a>
        </div>
      </div>
    </div>

    <!-- Otros Proyectos Destacados -->
    <div class="mt-20 other-projects-section">
      <h2
        class="text-[var(--color-orange)] text-2xl md:text-3xl font-bold italic mb-12"
      >
        OTROS PROYECTOS DESTACADOS
      </h2>

      <div class="space-y-12">
        <!-- Proyecto 1: Página Web UNE -->
        <div class="border-b border-white/20 pb-8 font-plex italic">
          <h3 class="text-white text-xl md:text-2xl font-semibold mb-4">
            Página Web Oficial — Centro Universitario UNE
          </h3>
          <p
            class="other-project-paragraph text-white leading-relaxed mb-6 text-base md:text-2xl"
          >
            Sitio institucional moderno y responsivo con Astro y Tailwind CSS.
            Carga ultrarrápida, optimización SEO, diseño consistente que
            comunica efectivamente programas académicos y servicios educativos.
          </p>
          <div class="flex flex-wrap items-center justify-between gap-4">
            <p class="text-white text-sm md:text-base btn-stack">
              <span class="font-semibold">Stack:</span> Astro, Tailwind CSS
            </p>
            <a
              href="https://une-demo.pages.dev/planteles/"
              target="_blank"
              rel="noopener noreferrer"
              class="btn-31"
            >
              <span class="text-container">
                <span class="text">Ver demo</span>
              </span>
            </a>
          </div>
        </div>

        <!-- Proyecto 2: Sistema de Punto de Venta -->
        <div class="border-b border-white/20 pb-8 font-plex italic">
          <h3 class="text-white text-xl md:text-2xl font-semibold mb-4">
            Sistema de Punto de Venta — Startup
          </h3>
          <p
            class="other-project-paragraph text-white leading-relaxed mb-6 text-base md:text-2xl"
          >
            Aplicación web con Server Side Rendering para cotizaciones de renta
            y gestión de pedidos. Interfaz optimizada para flujos de venta
            eficientes.
          </p>
          <div class="flex flex-wrap items-center justify-between gap-4">
            <p class="text-white text-sm md:text-base btn-stack">
              <span class="font-semibold">Stack:</span> Python, Tailwind CSS
            </p>
            <a
              href="https://github.com/DevEliezerMartinez/PosMABG"
              target="_blank"
              rel="noopener noreferrer"
              class="btn-31"
            >
              <span class="text-container">
                <span class="text">Ver Github</span>
              </span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .projects-section {
    background: linear-gradient(180deg, #192c76 0%, #0a1840 100%);
  }

  .dots-background {
    background-image: radial-gradient(
      circle,
      rgba(255, 255, 255, 0.15) 2px,
      transparent 2px
    );
    background-size: 40px 40px;
    background-position: 0 0;
  }

  /* Espaciador con fade de dots */
  .project-spacer {
    height: 100px;
  }

  /* Efecto de brillo sutil en hover para las imágenes */
  .projects-section img {
    transition: transform 0.3s ease;
  }

  .projects-section img:hover {
    transform: scale(1.02);
  }

  /* Estilo para el texto del Stack */
  .btn-stack {
    border: 1px solid white;
    padding: 0.75rem 1.5rem;
  }

  /* Estilos del botón animado */
  .btn-31 {
    border: 1px solid white;
    padding: 0.75rem 1.5rem;
    position: relative;
    font-size: 0.875rem;
    background-color: transparent;
    color: white;
    text-decoration: none;
    display: inline-block;
    cursor: pointer;
    overflow: hidden;
  }

  @media (min-width: 768px) {
    .btn-31 {
      font-size: 1rem;
    }
  }

  .btn-31:before {
    --progress: 100%;
    background: #93dafe;
    -webkit-clip-path: polygon(
      100% 0,
      var(--progress) var(--progress),
      0 100%,
      100% 100%
    );
    clip-path: polygon(
      100% 0,
      var(--progress) var(--progress),
      0 100%,
      100% 100%
    );
    content: "";
    inset: 0;
    position: absolute;
    transition: -webkit-clip-path 0.2s ease;
    transition: clip-path 0.2s ease;
    transition:
      clip-path 0.2s ease,
      -webkit-clip-path 0.2s ease;
  }

  .btn-31:hover:before {
    --progress: 0%;
  }

  .btn-31 .text-container {
    display: block;
    overflow: hidden;
    position: relative;
  }

  .btn-31 .text {
    display: block;
    font-weight: 900;
    position: relative;
    color: white;
    transition: color 0.3s ease;
  }

  .btn-31:hover .text {
    -webkit-animation: move-up-alternate 0.3s ease forwards;
    animation: move-up-alternate 0.3s ease forwards;
    color: #0a1840;
  }

  @-webkit-keyframes move-up-alternate {
    0% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(80%);
    }
    51% {
      transform: translateY(-80%);
    }
    to {
      transform: translateY(0);
    }
  }

  @keyframes move-up-alternate {
    0% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(80%);
    }
    51% {
      transform: translateY(-80%);
    }
    to {
      transform: translateY(0);
    }
  }
</style>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  import { SplitText } from "gsap/SplitText";

  const initProjectsAnimations = async () => {
    try {
      // Esperar a que las fuentes se carguen
      await document.fonts.ready;

      gsap.registerPlugin(ScrollTrigger, SplitText);

      // Animación de parallax suave en los dots
      gsap.to(".dots-background", {
        backgroundPosition: "100px 100px",
        ease: "none",
        scrollTrigger: {
          trigger: ".projects-section",
          start: "top bottom",
          end: "bottom top",
          scrub: 1,
        },
      });

      // Fade in del contenido al hacer scroll
      gsap.from(".projects-section h2", {
        opacity: 0,
        y: 30,
        duration: 1,
        scrollTrigger: {
          trigger: ".projects-section",
          start: "top 80%",
        },
      });

      gsap.from(".projects-section h3", {
        opacity: 0,
        y: 40,
        duration: 1,
        delay: 0.2,
        stagger: 0.3,
        scrollTrigger: {
          trigger: ".projects-section",
          start: "top 80%",
        },
      });

      // Animación de texto revelado - Alfabetizatec
      const alfabetizatecDescription = document.querySelector(
        ".alfabetizatec-description",
      );
      const alfabetizatecParagraphs = document.querySelectorAll(
        ".alfabetizatec-description .project-paragraph",
      );

      if (alfabetizatecDescription && alfabetizatecParagraphs.length > 0) {
        const alfabetizatecSplits = [];
        alfabetizatecParagraphs.forEach((paragraph) => {
          const split = new SplitText(paragraph, { type: "words" });
          alfabetizatecSplits.push(split);
          gsap.set(split.words, { opacity: 0, y: 20 });
        });

        const alfabetizatecTimeline = gsap.timeline({
          scrollTrigger: {
            trigger: alfabetizatecDescription,
            start: "top 70%",
            end: "bottom 60%",
            scrub: 1,
          },
        });

        alfabetizatecSplits.forEach((split, index) => {
          alfabetizatecTimeline.to(
            split.words,
            {
              opacity: 1,
              y: 0,
              duration: 1,
              stagger: 0.04,
              ease: "power2.out",
            },
            index === 0 ? 0 : "-=0.6",
          );
        });
      }

      // Animación de texto revelado - Demo Motorsport
      const motorsportDescription = document.querySelector(
        ".motorsport-description",
      );
      const motorsportParagraphs = document.querySelectorAll(
        ".motorsport-description .project-paragraph",
      );

      if (motorsportDescription && motorsportParagraphs.length > 0) {
        const motorsportSplits = [];
        motorsportParagraphs.forEach((paragraph) => {
          const split = new SplitText(paragraph, { type: "words" });
          motorsportSplits.push(split);
          gsap.set(split.words, { opacity: 0, y: 20 });
        });

        const motorsportTimeline = gsap.timeline({
          scrollTrigger: {
            trigger: motorsportDescription,
            start: "top 70%",
            end: "bottom 60%",
            scrub: 1,
          },
        });

        motorsportSplits.forEach((split, index) => {
          motorsportTimeline.to(
            split.words,
            {
              opacity: 1,
              y: 0,
              duration: 1,
              stagger: 0.04,
              ease: "power2.out",
            },
            index === 0 ? 0 : "-=0.6",
          );
        });
      }

      // Animación de texto revelado - Otros Proyectos
      const otherProjectsSection = document.querySelector(
        ".other-projects-section",
      );
      const otherProjectParagraphs = document.querySelectorAll(
        ".other-project-paragraph",
      );

      if (otherProjectsSection && otherProjectParagraphs.length > 0) {
        const otherProjectSplits = [];
        otherProjectParagraphs.forEach((paragraph) => {
          const split = new SplitText(paragraph, { type: "words" });
          otherProjectSplits.push(split);
          gsap.set(split.words, { opacity: 0, y: 20 });
        });

        const otherProjectsTimeline = gsap.timeline({
          scrollTrigger: {
            trigger: otherProjectsSection,
            start: "top 70%",
            end: "bottom 60%",
            scrub: 1,
          },
        });

        otherProjectSplits.forEach((split, index) => {
          otherProjectsTimeline.to(
            split.words,
            {
              opacity: 1,
              y: 0,
              duration: 1,
              stagger: 0.03,
              ease: "power2.out",
            },
            index === 0 ? 0 : "-=0.5",
          );
        });
      }

      console.log("Animaciones de Proyectos inicializadas correctamente");
    } catch (error) {
      console.error("Error al inicializar animaciones de Proyectos:", error);
    }
  };

  // Iniciar cuando el DOM esté listo
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initProjectsAnimations);
  } else {
    initProjectsAnimations();
  }
</script>